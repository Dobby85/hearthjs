# HearthJS

### v4.0.0
- ðŸ”¥ Improve performance of `sqlToJson` function. On big queries, the function could be really slow. Performance has been imrpoved up to 80% on tested queries (parsing going from 1.34s to 248ms)
- Add a new constant that can be used in SQL file (`PRINT_READY` which print the SQL request already filled with data)
### v3.0.0
- Can start a socket server to send event to client
### v2.9.1
- Remove semi colon
- Fix authorization issue (https://github.com/Dobby85/hearthjs/pull/7)
### v2.9.0
- Dot not parse upload directory when launching test. When the upload directory is big, it tooks too much time to launch tests.
- Fix SQL request parameters bugs when including a SQL request in another SQL file.
- Expose validation file in index.js
- Stringify SQL parameters when printing request.
- Add `CASCADE` to clean `TRUNCATE` request (https://github.com/Dobby85/hearthjs/pull/6)
- `request` and `debug` are moved to dependencies instead of dev dependencies (https://github.com/Dobby85/hearthjs/pull/8 & https://github.com/Dobby85/hearthjs/pull/9)
- Init command create all directories with .gitkeep files (https://github.com/Dobby85/hearthjs/pull/10)
### v2.8.3
- Add `(` et `)` in translation regex
### v2.8.2
- Fix translate command to also fin tr tag
- Ignore the following directories while finding translations ('/uploads', '/migration', '/sql', '/config', '/datasets', '/logs')
- Return a 400 code when an error is returned
### v2.8.1
- Can return a specific status code in addon
### v2.8.0
- Can send index in include parameters for templating
- Can set default value for array and object

### v2.7.0
- Upgrade commander and pg package to be comaptible with node 14.15

### v2.6.5
- Can update status code in before/after callback

### v2.6.4
- Add auth token in cookie and in Authorization header

### v2.6.3
- Remove https server for prod environment

### v2.6.2
- Can set a lang key for all translations used in schema

### v2.6.1
- Can update listening port for HTTPS

### v2.6.0
- Run a HTTPS server when using `prod` environment.

### v2.5.1
- Add assertTableOfObject in helper

### v2.5.0
- Remove JSON parse middleware from hearthjs, now you have to set it in your **init function**.

### v2.4.3
- Add object type in converter to avoid duplicating object

### v2.4.2
- Fix bug in mustache when a loop was too big and results in a `maximum call stacks size exceeded`

### v2.4.1
- Don't display migration diff if file is too big

### v2.4.0
- Correct bugs
- Can add force and yes option to migrate command
- Improve converter

### v2.3.0
- Update returned result of database `exec` and `query` promise function, return an array now
- Can pass parameter to SQL includes

### v2.2.1
- Add a helper to handle async/await error

### v2.2.0
- Correct bugs with log file deletion
- Can call `exec` and `query` function of the database with promise
- Can access the env (test, dev or prod) with `hearthjs.env`
- Correct bugs

### v2.1.0
- Add the possibility to include SQL file in another SQL file
- Add genericQueue in helpers
- Log errors which are generated by the query key (SQL filename) of a schema
- Send `req` instead of `req.body` to SQL files
- Correct the `put` request in testClient

### v2.0.1
- Can access express from hearthjs module

### v2.0.0
- Add dynamic command

### v1.3.0
- Update commander version from 3.0.1 to 4.0.1
- Execute addons before middleware
- Rework CLI
- Fix bug when converting the result of a SQL request to a JSON object with date type
- Fix migration name which gave a bad order
- Add the possibility to update the header in client test request
- Fix bug which throws an error when a test failed usint client test request

### v1.2.0
- Watch following files when launching `./hearthjs test` command.
  - `/api/**/test/test.*.js`
  - `/api/**/api.*.js`
  - `/api/**/sql/*.sql`
  - `/test/test.*.js`
- Correct errors in documentation
- Data validation: Correct date type validation. Accet any valid date.
- `./hearthjs test` crash on first failed test
- translations: Check value is not empty. If the value is empty, the key is returned.
- Add http client for tests. It is possible to create instance of login user to execute authenticated request.

### v1.1.0
- Add init function (beforeInit, init and after init)
- Correct translations regex. Now it match space, `.`, `,`, `/`, `\`, `|`, `?`, `!`, `:`, `+`, `-`, `*`, `=`
- Improve test documentation
- Add documentation on server
- Data validation: type date accepts date object

### v1.0.1
- Update main in package.json

### v1.0.0
- Add first version of hearthjs
- Add Logger
- Add API declaration
- Add Database management
- Add Cron
- Add Translations
- Add Data mapping
- Add Data validation
- Add Documentation
- Add Addons
- Add Extern API declaration
